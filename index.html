<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>ArcGIS Layer Download</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Convert and download ArcGIS layers in the formats: CSV, XLS, FILEGEODATABASE, SHAPEFILE, KML.">
    <meta name="author" content="Felipe Stroff">

    <link rel="stylesheet" href="https://js.arcgis.com/4.18/esri/themes/light/main.css">
</head>
<body>
    <div class="esri-widget esri-component"
        style="max-width: 600px; margin: 0 auto;">
        <div class="scroller esri-component esri-feature-form esri-widget esri-widget--panel">
            <form id="form" class="esri-feature-form__form">
                <div class="esri-feature-form__form-header">
                    <h2 class="esri-widget__heading">
                        ArcGIS Layer Download
                    </h2>
                    <p class="esri-feature-form__description-text">
                        Download ArcGIS layers in the formats: CSV, XLS, GeoJSON, FILEGEODATABASE, SHAPEFILE, KML.
                    </p>
                </div>
                <label class="esri-feature-form__label">
                    Service URL
                    <input type="url" id="serviceUrl" class="esri-input esri-feature-form__input" required
                        placeholder="https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer/0">
                        <p class="esri-feature-form__description-text">
                            Only REST services are supported.
                        </p>
                </label>
                <label class="esri-feature-form__label">
                    Format
                    <select id="format" class="esri-input esri-feature-form__input esri-select" required>
                        <option value="csv" data-ext="csv">CSV</option>
                        <option value="xls" data-ext="xls">XLS</option>
                        <option value="geojson" data-ext="geojson">GeoJSON</option>
                        <option value="FILEGEODATABASE" data-ext="zip">FILEGEODATABASE</option>
                        <option value="SHAPEFILE" data-ext="zip">SHAPEFILE</option>
                        <option value="KML" data-ext="kml">KML</option>
                    </select>
                    <p class="esri-feature-form__description-text">
                        CSV, XLS and GeoJSON formats are converted directly.
                    </p>
                    <p class="esri-feature-form__description-text">
                        The rest of the formats use the ArcGIS geoprocessing service (login required on ArcGIS Online).
                    </p>
                    <p class="esri-feature-form__description-text">
                        Files converted by the geoprocessing service will be saved within your organization's ArcGIS Online.
                    </p>
                </label>
                <div id="errMessage" class="esri-feature-form__field-error-message"
                        style="display: none; color: #8c2907"></div>
                <button id="btn" type="submit" class="esri-button">
                    Convert
                </button>
            </form>
        </div>
        
        <div id="files" class="esri-print__export-panel-container"
            style="display: none">
            <h3 class="esri-print__export-title esri-widget__heading">
                Converted files
            </h3>
        </div>
    </div>

    <div class="esri-widget esri-heading esri-component"
        style="text-align: center;">
        <a href="https://github.com/felipestroff/ArcGIS-Layer-Download" target="_blank" rel="noreferrer"
            class="esri-attribution__link">
            <h4 class="esri-heading">
                <span class="esri-icon-link-external"></span> View on GitHub
            </h4>
        </a>
    </div>

    <script src="https://js.arcgis.com/4.18/"></script>
    <!-- Load the main Terraformer library -->
    <script src="https://unpkg.com/terraformer/terraformer.js"></script>
    <!-- Load the ArcGIS Parser -->
    <script src="https://unpkg.com/terraformer-arcgis-parser/terraformer-arcgis-parser.js"></script>
    <script src="./src/client/index.js"></script>
</body>
</html>
